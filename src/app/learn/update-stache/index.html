<stache
  navTitle="Update Stache"
  navOrder="40"
  layout="sidebar"
  showTableOfContents="true">

  <stache-tutorial>
    <stache-tutorial-heading>
      Update {{ stache.jsonData.global.productNameShort }}
    </stache-tutorial-heading>
    <stache-tutorial-summary>
      <p>
        This tutorial provides step-by-step instructions on how to update {{ stache.jsonData.global.productNameShort }}, SKY UX, and its dependencies with the latest versions.
      </p>
      <p>
        Before you update, we recommend you familiarize yourself with the changes and new features to Stache in our <a href="https://github.com/blackbaud/stache2/blob/master/CHANGELOG.md"> changelog <i class="fa fa-external-link" aria-hidden="true"></i></a>. Some updates may require additional changes in how you use {{ stache.jsonData.global.productNameShort }} components.
      </p>
    </stache-tutorial-summary>

    <stache-tutorial-step showNumber="false">
      <stache-tutorial-step-heading>
        Update Stache command
      </stache-tutorial-step-heading>
      <stache-tutorial-step-body>
        <p>
          Starting with Stache version <stache-code>2.13.0</stache-code>, the <stache-code>skyux stache-update</stache-code> command automates the process to update your Stache site. To update from a version prior to <stache-code>2.13.0</stache-code>, follow the <a stacheRouterLink="." fragment="update-the-stache-version">step-by-step instructions below</a> in this tutorial.
        </p>
        <p>
          After you are on version <stache-code>2.13.0</stache-code>, update your Stache site from the Visual Studio Code terminal or a command prompt by running:
        </p>
        <sky-code-block>
          skyux stache-update
        </sky-code-block>

        <p>
          The command updates the versions of Stache, SKY UX, and SKY UX Builder, deletes your <stache-code>node-modules</stache-code> folder, and runs <stache-code>npm install</stache-code> for you. <span *stacheInternal>If you have the Whitelist plugin, the whitelist plugin version will also update.</span> After it finishes, you are all set to create more stellar content.
        </p>

        <sky-alert alertType="info">
          If you prefer to continue manually updating your Stache site, you can still <a stacheRouterLink="." fragment="update-the-stache-version">follow the step-by-step instructions</a> below (even after you update to <stache-code>2.13.0</stache-code>).
        </sky-alert>
      </stache-tutorial-step-body>
    </stache-tutorial-step>



    <stache-tutorial-step>
      <stache-tutorial-step-heading>
        Update the {{ stache.jsonData.global.productNameShort }} version
      </stache-tutorial-step-heading>
      <stache-tutorial-step-body>
        <ol>
          <li>
            Open the <stache-code>package.json</stache-code> file in your project's root directory.
          </li>
          <li>
            Under the <stache-code>dependencies</stache-code> property, update <stache-code>@blackbaud/stache</stache-code> to the latest version in the <a href="https://github.com/blackbaud/stache2/blob/master/CHANGELOG.md">{{ stache.jsonData.global.productNameShort }} changelog <i class="fa fa-external-link" aria-hidden="true"></i></a>. Before you update, we recommend you review the <a href="https://github.com/blackbaud/stache2/blob/master/CHANGELOG.md">changelog <i class="fa fa-external-link" aria-hidden="true"></i></a> for breaking changes.
          </li>
        <sky-code-block
          languageType="json">
            "dependencies": {
              "@blackbaud/stache": "{{ @buildtime:stache.jsonData.global.stacheVersion }}",
              ...
        </sky-code-block>
        </ol>


      </stache-tutorial-step-body>
    </stache-tutorial-step>

    <stache-tutorial-step>
      <stache-tutorial-step-heading>
        Update the SKY UX dependencies
      </stache-tutorial-step-heading>
      <stache-tutorial-step-body>
        <p>
           Stache is a component library for SKY UX, which means updating the SKY UX dependencies is also important.</p>
        <ol>
          <li>
            Under the <stache-code>dependencies</stache-code> property in the <stache-code>package.json</stache-code> file, update <stache-code>@blackbaud/skyux</stache-code> to the latest version in the <a href="https://github.com/blackbaud/skyux2/blob/master/CHANGELOG.md">SKY UX changelog <i class="fa fa-external-link" aria-hidden="true"></i></a>.
          </li>
          <li>
            <p>
              Under the <stache-code>devDependencies</stache-code> property, update <stache-code>@blackbaud/skyux-builder</stache-code> to the latest version in the <a href="https://github.com/blackbaud/skyux-builder/blob/master/CHANGELOG.md">SKY UX Builder changelog <i class="fa fa-external-link" aria-hidden="true"></i></a>.
            </p>
            <stache-include fileName="package-json-sample.html"></stache-include>
          </li>
        </ol>
      </stache-tutorial-step-body>
    </stache-tutorial-step>

    <stache-tutorial-step>
      <stache-tutorial-step-heading>
        Update node_modules
      </stache-tutorial-step-heading>
      <stache-tutorial-step-body>
        <p>
          The <stache-code>node_modules</stache-code> folder contains the dependencies that are required to run and serve your project locally. To update them, you must delete the folder and re-add it to your project.
        </p>
        <ol>
          <li>
            In VS Code, File Explorer (Windows), or Finder (Mac), delete the <stache-code>node_modules/@blackbaud/</stache-code> folder for your project to remove outdated versions of {{ stache.jsonData.global.productNameShort }}, SKY UX, and its dependencies.
          </li>
          <li>
            From command prompt or terminal, enter <stache-code>npm install</stache-code> and press <kbd>Enter</kbd> (Windows) or <kbd>return</kbd> (Mac)  to re-install SKY UX, {{ stache.jsonData.global.productNameShort }}, and its dependencies.
          </li>
          <li>
            After <stache-code>npm install</stache-code> finishes, you can return to working on content for your Stache site.
          </li>
        </ol>
      </stache-tutorial-step-body>
    </stache-tutorial-step>
  </stache-tutorial>
</stache>
