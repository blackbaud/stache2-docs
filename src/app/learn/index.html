<app-nav>
</app-nav>

<stache
  pageTitle="Getting Started"
  showTableOfContents="true">

  <stache-page-anchor>
      Prerequisites
  </stache-page-anchor>
  <p>
    Stache components require SKY UX to use. To learn more, refer to the <a href="https://developer.blackbaud.com/skyux2/learn">SKY UX documentation</a>.
  </p>

  <stache-page-anchor>
    Start a Stache Project
  </stache-page-anchor>
  <p>
    Starting a Stache project is quick and easy. To get started, from the command prompt, <stache-code>cd</stache-code> into the directory where you want to create the project and run <stache-code>skyux new --template stache</stache-code>. This will generate a new SKY UX project with the Stache template and components. For more information about starting a new SKY UX project, refer to their <a href="https://developer.blackbaud.com/skyux2/learn/tutorials/create-project">documentation</a>.
  </p>

  <stache-page-anchor>
    Add Stache to an Existing SKY UX Project
  </stache-page-anchor>

  <stache-tutorial>
    <stache-tutorial-summary>
      This tutorial will show you step by step how to add Stache 2 to an existing SPA built with SKY UX builder.
    </stache-tutorial-summary>

    <stache-tutorial-step>
      <stache-tutorial-step-heading>
        Install dependencies
      </stache-tutorial-step-heading>
      <stache-tutorial-step-body>
        <stache-code-block>
          npm install --save @blackbaud/stache
        </stache-code-block>
      </stache-tutorial-step-body>
    </stache-tutorial-step>

    <stache-tutorial-step>
      <stache-tutorial-step-heading>
        Add Stache 2 module into your app
      </stache-tutorial-step-heading>
      <stache-tutorial-step-body>
        <p>
          Open your <stache-code>app-extras.module.ts</stache-code> file in your project.  Here we need to import and export the <stache-code>Stache Module</stache-code> to use the Stache components throughout your project.
        </p>

        <stache-code-block
          languageType="typescript">
          import { NgModule } from '@angular/core';

          import { StacheModule } from '@blackbaud/stache';

          // Specify entry components, module-level providers, etc. here.
          @NgModule({
            imports: [
              StacheModule
            ],
            exports: [
              StacheModule
            ],
        </stache-code-block>
      </stache-tutorial-step-body>
    </stache-tutorial-step>

    <stache-tutorial-step>
      <stache-tutorial-step-heading>
        Declare the needed plugins in skyuxconfig
      </stache-tutorial-step-heading>
      <stache-tutorial-step-body>
        <p>
          Open the <stache-code>skyuxconfig.json</stache-code> file in your project.  Add the required plugins to the <stache-code>plugins</stache-code> array.
        </p>

        <stache-code-block
          languageType="json">
            {
              "name": "stache",
              "mode": "easy",
              "compileMode": "aot",
              "plugins": [
                "@blackbaud/skyux-builder-plugin-stache-code-block",
                "@blackbaud/skyux-builder-plugin-stache-include",
                "@blackbaud/skyux-builder-plugin-stache-route-metadata/collector",
                "@blackbaud/skyux-builder-plugin-stache-route-metadata/generator"
              ],
              "app": {
                "title": "Stache 2 Documentation"
              }
            }
        </stache-code-block>
      </stache-tutorial-step-body>
    </stache-tutorial-step>

    <stache-tutorial-step
      showNumber="false">
      <stache-tutorial-step-body>
        <sky-alert alertType="info">
          If you are using <stache-code>"auth" : true</stache-code> in your <stache-code>skyuxconfig.json</stache-code> settings, you can make use of the <strong>skyux-builder-plugin-auth-email-whitelist</strong> plugin to lock authentication to the following approved email addresses.
        </sky-alert>
        <stache-code-block>
          blackbaud.com,
          blackbaud.me,
          blackbaud.co.uk,
          blackbaud.au,
          microedge.com,
          attentive.ly,
          everydayhero.com
        </stache-code-block>
        you can add the white list plugin to your plugins array.
        <stache-code-block>
          "auth": true
          "plugins": [
            "@blackbaud/skyux-builder-plugin-auth-email-whitelist"
            ...
        </stache-code-block>
      </stache-tutorial-step-body>
    </stache-tutorial-step>

    <stache-tutorial-step>
      <stache-tutorial-step-heading>
        Import and Export Stache Config Service
      </stache-tutorial-step-heading>
      <stache-tutorial-step-body>
        <p>
          In order to make use of the <stache-code>StacheConfigService</stache-code>, we need to declare it in our <stache-code>app-extras.module.ts</stache-code> file, and tie it into the <stache-code>SkyAppConfig</stache-code>.  To do this, we need to first <strong>import</strong> both modules, and declare them in the <stache-code>providers</stache-code> array.
        </p>

        <stache-code-block
          languageType="typescript">
          import { NgModule } from '@angular/core';

          import { SkyAppConfig } from '@blackbaud/skyux-builder/runtime';
          import { StacheModule, StacheConfigService } from '@blackbaud/stache';

          // Specify entry components, module-level providers, etc. here.
          @NgModule({
            imports: [
              StacheModule
            ],
            exports: [
              StacheModule
            ],
            providers: [
              {
                provide: StacheConfigService,
                useExisting: SkyAppConfig
              }
            ],
            entryComponents: []
          })
          export class AppExtrasModule { }
        </stache-code-block>
      </stache-tutorial-step-body>
    </stache-tutorial-step>
  </stache-tutorial>
</stache>
