<stache
  pageTitle="Go Live"
  showTableOfContents="true"
  navOrder="70"
  navTitle="Go live">


<stache-page-summary>
    <p>
      When a Stache site is configured for public use, the site is no longer restricted to authenticated users and can be accessed by anyone. Before you publish your site, review our recommendations for a successful launch.
    </p>
    <stache-internal>
      <sky-alert alertType="danger">
        Failure to adhere to the recommendations and guidelines could result in your site's removal.
      </sky-alert>
    </stache-internal>
  </stache-page-summary>

  <stache-page-anchor>
    Launch checklist
  </stache-page-anchor>

  <p>
    <i class="far fa-check-square"></i> <b>Peer review</b> –
  </p>
  <p *stacheInternal>
    <i class="far fa-check-square"></i> <b>Strategic Content Development (SCD) review</b> – If you are publishing a Blackbaud Stache site to the public, you must have a member of the SCD team review the site. To request a content review, post the request in the <a href="https://blackbaud.slack.com/messages/stache-general"><i class="fa fa-slack" aria-hidden="true"></i>stache-general</a> Slack channel.
  </p>
  <p *stacheInternal>
    <i class="far fa-check-square"></i> <b>Remove Blackbaud authentication</b> –
  </p>
  <p *stacheInternal>
    <i class="far fa-check-square"></i> <b>Update search settings</b> –
  </p>
    <p>
    <i class="far fa-check-square"></i> <b>Protect your master branch</b> –
  </p>

  <stache-internal>
  <stache-page-anchor *stacheInternal>
    Remove Blackbaud authentication
  </stache-page-anchor>
  <p>
    To enable a Stache site to be accesible by anyone, not just those with a Blackbaud email address, update the skyuxconfig.json and package.json files to remove authentication and the Email Whitelist Plugin.
  </p>

  <h3>
    skyuxconfig.json file
  </h3>

  <p>
    Remove <stache-code>"@blackbaud/skyux-builder-plugin-auth-email-whitelist"</stache-code> from the plugins and set <stache-code>"auth":</stache-code> to <stache-code>false</stache-code>.
  </p>

  <stache-code-block languageType="json">
      "auth": false,
      "plugins": [
        "@blackbaud/skyux-builder-plugin-stache"
      ],
  </stache-code-block>

  <h3>
    package.json file
  </h3>

  <p>
    Remove the <stache-code>"@blackbaud/skyux-builder-plugin-auth-email-whitelist": "{{ @buildtime:stache.jsonData.global.emailVersion }}",</stache-code> from the dependencies.
  </p>

  <stache-code-block languageType="json">
      "dependencies": {
        "@blackbaud/skyux": "{{ @buildtime:stache.jsonData.global.skyUXVersion }},
        "@blackbaud/stache": "{{ @buildtime:stache.jsonData.global.stacheVersion }}"
      },
  </stache-code-block>

  <stache-page-anchor *stacheInternal>Update search settings</stache-page-anchor>

  <p>
    To enable search to work when you make your site public, you need to update two settings in the skyuxconfig.json file. Optionally, we also recommend updating a third.
  </p>

  <p>
    Modify the Omnibar nav service <stache-code>searchUrl</stache-code> setting so that the URL no longer contains <stache-code>-internal</stache-code> and set the Stache app setting to <stache-code>"is_internal": false</stache-code>.
  </p>

  <p>
    <b>Optionally</b>, when a site is set to public, depending on who the site is for, we recommend removing the site from the global search. For example, if your site is mainly for customers and not Blackbaud Staff, remove it from the global search. The global search is used on the <a href="https://docs.blackbaud.com">RDO Engineering landing page</a>. We want to ensure the search there is most helpful for Blackbaud Staff!
  </p>

  <stache-code-block languageType="json">
    "appSettings": {
    "stache": {
      "searchConfig": {
        "is_internal": false,
        "is_globally_searchable": false,
        }
      }
    },
    "auth": false,
    "omnibar": {
      "experimental": true,
      "nav": {
        "services": [
          {
            "title": "Stache Docs",
            "searchUrl": "https://stache-search-query.sky.blackbaud.com/search/stache",
            "items": [

  </stache-code-block>
  </stache-internal>

  <stache-page-anchor>
    Protect your master branch
  </stache-page-anchor>

  <p>
    No matter which Git repository you use to host your Stache site, we strongly recommend you review your branch policies for your master branch. This ensures that content doesn't get released without a strict approval process. This protects you from any unauthorized content being released, reinforces peer review, and allows you to set up your own release process.
  </p>

  <h3>
    GitHub
  </h3>

  <h3>
    Azure DevOps
  </h3>
  <p>
    Update the policies for your repository's master branch in Azure DevOps to prevent unreviewed content from becoming live on your site.
  </p>

  <ol>
    <li>
      In Azure DevOps on the <b>Branches</b> tab, select the master branch's menu and select <b>Branch policies</b>. The <b>Policies</b> page displays.
    </li>
    <li>
      Select <b>Require a minimum number of reviewers</b> and <b>Reset code reviewer votes when there are new changes</b>. Do <u>not</u> allow users to approve their own changes.
    </li>
    <li>
      Select <b>Enforce a merge strategy</b> and select <b>Squash merge</b>.
    </li>
    <li>
      Under <b>Automatically include code reviewers</b>, select <b>Add automatic reviewers.</b>
    </li>
    <li>
      Under <b>Reviewers</b>, add a team and select <b>Save</b>.
    </li>
  </ol>

  <p>
    For public sites, we recommend tagging a team as a required reviewer. This option enables anyone to make a contribution, but only the team can approve the change. If you require multiple individual reviewers, it will require all of them to approve before completion. If you create a team, it enables any one person for that team to approve.
  </p>




</stache>
