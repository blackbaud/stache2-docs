<stache navTitle="Update Stache" navOrder="3" layout="container" #stache="">
  <stache-tutorial>
    <stache-tutorial-heading>
      Update {{ stache.jsonData?.global.productNameShort }}
    </stache-tutorial-heading>
    <stache-tutorial-summary>
      This tutorial provides step-by-step instructions to update {{ stache.jsonData?.global.productNameShort }} and SKY UX dependencies with the latest versions.
    </stache-tutorial-summary>

    <stache-tutorial-step>
      <stache-tutorial-step-heading>
        Update the {{ stache.jsonData?.global.productNameShort }} version
      </stache-tutorial-step-heading>
      <stache-tutorial-step-body>
        <ol>
          <li>
            Open the <stache-code>package.json</stache-code> file in your project's root directory. 
          </li>
          <li>
            Under the <stache-code>dependencies</stache-code> property, update <stache-code>@blackbaud/stache</stache-code> to the latest version in the <a href="https://github.com/blackbaud/stache2/blob/master/CHANGELOG.md">{{ stache.jsonData?.global.productNameShort }} changelog <i class="fa fa-external-link" aria-hidden="true"></i></a>.
          </li>
        <stache-code-block languageType="json">
            "dependencies": {{ '{' }}
              "@blackbaud/stache": "^2.6.0",
              ...
        </stache-code-block>
        </ol>
        <sky-alert alertType="info">
            Before you update, review the <a href="https://github.com/blackbaud/stache2/blob/master/CHANGELOG.md">changelog <i class="fa fa-external-link" aria-hidden="true"></i></a> for breaking changes.
        </sky-alert>

      </stache-tutorial-step-body>
    </stache-tutorial-step>

    <stache-tutorial-step>
      <stache-tutorial-step-heading>
        Update the SKY UX dependencies
      </stache-tutorial-step-heading>
      <stache-tutorial-step-body>
        <p>
           Stache is a component library for SKY UX, which means updating the SKY UX dependencies is also important.</p>
        <ol>
          <li>
            Under the <stache-code>dependencies</stache-code> property in the <stache-code>package.json</stache-code> file, update <stache-code>@blackbaud/skyux</stache-code> to the latest version in the <a href="https://github.com/blackbaud/skyux2/blob/master/CHANGELOG.md">SKY UX changelog <i class="fa fa-external-link" aria-hidden="true"></i></a>.
          </li>
          <li>
            Under the <stache-code>devDependencies</stache-code> property, update <stache-code>@blackbaud/skyux-builder</stache-code> to the latest version in the <a href="https://github.com/blackbaud/skyux-builder/blob/master/CHANGELOG.md">SKY UX Builder changelog <i class="fa fa-external-link" aria-hidden="true"></i></a>.
            <stache-include fileName="package-json-sample.html"><stache-code-block languageType="json">
  "dependencies": {{ '{' }}
    "@blackbaud/skyux": "^2.11.0",
    "@blackbaud/skyux-builder-plugin-auth-email-whitelist": "~1.0.0",
    "@blackbaud/stache": "^2.6.0"
  },
  "devDependencies": {{ '{' }}
    "@blackbaud/skyux-builder": "^1.14.0"
  }
</stache-code-block>
</stache-include>
          </li>
        </ol>
      </stache-tutorial-step-body>
    </stache-tutorial-step>

    <stache-tutorial-step>
      <stache-tutorial-step-heading>
        Specify plugins
      </stache-tutorial-step-heading>
      <stache-tutorial-step-body>
        <p>
          The <stache-code>skyuxconfig.json</stache-code> file in your project's root directory contains plugins to expand on existing SKY UX Builder functionality and create new functionality. Stache requires specific plugins to use certain Stache components.
        </p>
        <p>
          Open the <stache-code>skyuxconfig.json</stache-code> file, and make sure it <a routerLink="/learn/plugins">lists the plugins that you need</a> in the <stache-code>plugins</stache-code> array.
        </p>
        <ul>
          <li>
            <p>
              The required <stache-code>@blackbaud/skyux-builder-plugin-stache</stache-code> plugin bundles all other plugins that {{ stache.jsonData?.global.productNameShort }} requires.
            </p>
          </li>
          <li>
            <p>
              The optional <stache-code>@blackbaud/skyux-builder-plugin-auth-email-whitelist</stache-code> plugin allows you to enable Blackbaud authentication for internal sites so that you can restrict access to internal users only.
            </p>
          </li>
        </ul>
        <stache-include fileName="skyux-config-sample.html"><p>
  Setup without authentication:
</p>
<stache-code-block languageType="json">
  {{ '{' }}
    "mode": "easy",
    "compileMode": "aot",
    "auth": false,
    "plugins": [
      "@blackbaud/skyux-builder-plugin-stache"
    ],
    "app": {{ '{' }}
      "title": "your_project_title"
    },
    "appSettings": {{ '{' }}
      "stache": {{ '{' }}
      }
    }
  }
</stache-code-block>
<p>
  Blackbaud setup with authentication:
</p>
<stache-code-block languageType="json">
  {{ '{' }}
    "mode": "easy",
    "compileMode": "aot",
    "auth": true,
    "plugins": [
      "@blackbaud/skyux-builder-plugin-stache",
      "@blackbaud/skyux-builder-plugin-auth-email-whitelist"
    ],
    "app": {{ '{' }}
      "title": "your_project_title"
    },
    "appSettings": {{ '{' }}
      "stache": {{ '{' }}
      }
    }
  }
</stache-code-block>

</stache-include>
      </stache-tutorial-step-body>
    </stache-tutorial-step>

    <stache-tutorial-step>
      <stache-tutorial-step-heading>
        Register {{ stache.jsonData?.global.productNameShort }} module
      </stache-tutorial-step-heading>
      <stache-tutorial-step-body>
        <p>
          Open the <stache-code>src/app/app-extras.module.ts</stache-code> file, and make sure it imports <stache-code>StacheModule</stache-code>.
        </p>
        <sky-alert alertType="info">
          Prior to {{ stache.jsonData?.global.productNameShort }} 2.0.0-beta.9, it was also necessary to declare <stache-code>StacheConfigService</stache-code> as a provider. This is no longer required.
        </sky-alert>

        <stache-include fileName="app-extras-sample.html"><stache-code-block languageType="typescript">
  import {{ '{' }} NgModule } from '@angular/core';
  import {{ '{' }} StacheModule } from '@blackbaud/stache';

  // Specify entry components, module-level providers, etc. here.
  @NgModule({{ '{' }}
    imports: [
      StacheModule
    ],
    exports: [
      StacheModule
    ],
    providers: [],
    entryComponents:[]
  })
  export class AppExtrasModule {{ '{' }} }
</stache-code-block>
</stache-include>
      </stache-tutorial-step-body>
    </stache-tutorial-step>

    <stache-tutorial-step>
      <stache-tutorial-step-heading>
        Update node_modules
      </stache-tutorial-step-heading>
      <stache-tutorial-step-body>
        <p>
          The <stache-code>node_modules</stache-code> folder contains the dependencies that are required to run and serve your project locally.
        </p>
        <ol>
          <li>
            Delete the <stache-code>node_modules/@blackbaud/</stache-code> folder for your project to remove outdated versions of {{ stache.jsonData?.global.productNameShort }} and its plugins.
          </li>
          <li>
            From the command prompt, run <stache-code>npm install</stache-code> to re-install {{ stache.jsonData?.global.productNameShort }} and its dependencies.
          </li>
        </ol>
      </stache-tutorial-step-body>
    </stache-tutorial-step>

    <stache-tutorial-step>
      <stache-tutorial-step-heading>
        Update components
      </stache-tutorial-step-heading>
      <stache-tutorial-step-body>
        <p>
          As with any major update, existing components or implementations may change. Please review the <a href="https://github.com/blackbaud/stache2/blob/master/CHANGELOG.md">{{ stache.jsonData?.global.productNameShort }} changelog <i class="fa fa-external-link" aria-hidden="true"></i></a> for breaking changes that may require changes in how you use {{ stache.jsonData?.global.productNameShort }} components.
        </p>
      </stache-tutorial-step-body>
    </stache-tutorial-step>
  </stache-tutorial>
</stache>
